<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/mainLayout">
	<div layout:fragment="content">
		<!-- 상단 내비 / 타이틀 -->
		<div class="d-sm-flex align-items-center justify-content-between ">
			<span class="col_gray01 font_14 "><i class="fas fa-fw fa-home"></i> &gt; <label th:text="#{UIT0361}">분석설정 저장 목록</label> </span>
		</div>
		<div class="d-sm-flex align-items-center justify-content-between mb-4">
			<h1 class="col_grey font_23" th:text="#{UIT0361}">분석설정 저장 목록</h1>
		</div>
		<!-- 영역 -->
		<div class="row">
			<div class="col-lg mb-4">
				<form id="frm" name="frm" action="../form1.do" method="post">
					<input type="hidden" id="dgnssDbmsId" name="dgnssDbmsId" value="" />
					<input type="hidden" id="schemaName" name="schemaName" value="" />
					<input type="hidden" id="tableName" name="tableName" value="" />
					<input type="hidden" id="columnName" name="columnName" value="" />
					<input type="hidden" id="analsId" name="analsId" value="" />
				</form>
				<div class="card shadow mb-4">
					<div class="card-body">
						<input type="hidden" id="itemsPerPage" name="itemsPerPage" value="10" />
						<div id="grid" class="tb_type99"></div>
						<div id="pagination" class="tui-pagination"></div>
					</div>
				</div>
			</div>
		</div>
					

		<script type="text/javascript"  class="code-js" th:inline="javascript">
			/*<![CDATA[*/
			var sessionCon = /*[[ ${sessionCon} ]]*/;
		 	var fileName = /*[[ ${conFileName} ]]*/;
		 	var conType = /*[[ ${conType} ]]*/;
		 	var UIT0041 = /*[[ #{UIT0041} ]]*/; //: 처리중 에러가 발생하였습니다
		 	var UIT0221 = /*[[ #{UIT0221} ]]*/; //: 확인
		 	var UIT0240 = /*[[ #{UIT0240} ]]*/; //: 컬럼명
		 	var UIT0264 = /*[[ #{UIT0264} ]]*/; //: 스키마명
		 	var UIT0266 = /*[[ #{UIT0266} ]]*/; //: 테이블명
		 	var UIT0340 = /*[[ #{UIT0340} ]]*/; //: 분석명
		 	var UIT0362 = /*[[ #{UIT0362} ]]*/; //: 등록일시
		 	var UIT0363 = /*[[ #{UIT0363} ]]*/; //: 설정보기
		 	var UIT0392 = /*[[ #{UIT0392} ]]*/; //: 분석 아이디
		 	var UIT0393 = /*[[ #{UIT0393} ]]*/; //: 오류명
		 	var UIT0394 = /*[[ #{UIT0394} ]]*/; //: 오류내용
			/*]]*/
			
			var grid = null;
			
			$(function() {
				girdView();
				fn_search();
			});
			
			function girdView(){
			
				var columns = [
					{header: UIT0340, name: 'dgnssSaveNm', whiteSpace: 'normal', width: 150, align: 'center'},
					{header: UIT0264, name: 'schemaNm', whiteSpace: 'normal', width: 140, align: 'center'},
					{header: UIT0266, name: 'tableNm', whiteSpace: 'normal', width: 140, align: 'center'},
					{header: UIT0240, name: 'columnNmDc', whiteSpace: 'normal', whiteSpace: 'nowrap'},
					{header: UIT0362, name: 'registDt', whiteSpace: 'normal', width: 150, align: 'center'},
					{header: UIT0363, name: 'goForm2', whiteSpace: 'normal', width: 100, align: 'center'}
				];
			
				grid = new tui.Grid({
					el: $('#grid')[0],
					data: [],
					scrollX: false,
					scrollY: false,
					minBodyHeight: "auto",
					bodyHeight : 800,
					header: {
						height: 50
					},
					columns: columns
				});
			
				const extOptions = {
					cell: {
						focused: {
							border: 0 // 선택 셀 강조 표시 x
						}
					}
				};
			
				tui.Grid.applyTheme('default', extOptions);
			
				//grid.refreshLayout();
			}
			
			function fn_search() {
			
				$.post('listAjax.do', {
					pageIndex: $('#pageIndex').val(),
					itemsPerPage: $('#itemsPerPage').val()
				}, function(data) {
					var list = data.list;
					var totalCnt = data.totalCnt;
			
					for (var i in list) {
			
						var item = list[i];
			
						item.goForm2 = '<input type="button" class="btn_select" value="'+UIT0221+'" onclick="goForm2(' + i + ')" />';
					}
					grid.resetData(list);
			
					/* 페이징 function 호출 */
					fn_pagination(totalCnt);
				});
			}
			
			function goForm2(rowIdx) {
			
				var row = grid.getRowAt(rowIdx);
			
				$('#dgnssDbmsId').val(row.dgnssDbmsId);
				$('#schemaName').val(row.schemaNm);
				$('#tableName').val(row.tableNm);
				$('#columnName').val(row.columnNmDc);
				$('#analsId').val(row.analsIdDc);
			
				$('#frm').submit();
			}
		</script>
	</div>
</html>